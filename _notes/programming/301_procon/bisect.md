---
title: "Pythonで二分探索を行うライブラリ「bisect」"
date: "2019-11-09T02:01:30+09:00"
excerpt: "Pythonで二分探索を行うライブラリ「bisect」について"
tag: ["Python"]
updatedAt: "2019-11-09T02:01:30+09:00"
author:
  name: Tatsuroh Wakasugi
  picture: "/assets/blog/authors/WAT.jpg"
---

※この記事は Qiita にも投稿されています： [Python で二分探索を行うライブラリ「bisect」](https://qiita.com/T_Wakasugi/items/c979e977f56531942de4)

趣味で競プロをやるようになり、Atcoder の問題を何問か解いているのだが、  
やっている内に覚えないといけないこともいくつかあるわけで。<br>
その内の一つに二分探索というアルゴリズムを使うという場面を多く見てきたため、自分が今よく利用している python でいつでも使えるように二分探索を行うスクリプトでも書いておこうかと思った。

しかし取り掛かろうとして調べて見たところ、なんと python には二分探索を行うライブラリが最初から用意されているらしい。
それがこの「 **bisect** 」というもので、このライブラリについて調べて見た。

# bisect

bisect モジュールの bisect 関数はリストと値を入力とし、値をリストに挿入する位置のインデックスを返す。
とりあえずは使用例ということで、bisect を使ってみた。

```python
>>> import bisect
>>> a=[10,20,30,40,50,60,70,80,90,100]
>>>
>>> bisect.bisect(a,55)
5
>>>
```

この例の場合、リスト a に値 55 を入れようとした時、a\[5\](50 と 60 の間)に入れるのが適切なため、５を返す。

ちなみに bisect を使う時、入力するリストはすでにソート済みであることが前提である（これは本来の二分探索でも同じ）。ソートされてないリストを入力してもエラーは発生しないが、ソートしていないため間違った形で二分探索が行われてしまう。

```python
>>> import bisect
>>> a=[54,32,76,33,89,44,323,67,88,1]
>>> bisect.bisect(a,55) # ソートしなくても二分探索は行うが・・・
6
```

また、入力した値が既にリストに入っていた場合、リストでその値の前に入れようとするのか、後に入れようとするのか分かれるがどうなるのか？

bisect モジュールには更に**bisect_left**と**bisect_right**という関数があり、各々の場合に応じてこれらを使い分ける。
使用例を示す。

```python
>>> import bisect
>>> a=[1,2,2,2,3]
>>>
>>> bisect.bisect_left(a,2)
1
>>> bisect.bisect_right(a,2)
4
>>> bisect.bisect(a,2)
4
```

この例の場合、a\[1\]から a\[3\]まで 2 であり、bisect_left で 2 をリスト a に適用すると、挿入点は 2 の一番前の位置である 1 を返す。
bisect_right を使った場合はその逆で、挿入点は 2 の一番後の位置である 4 を返す。
ちなみに bisect 関数は bisect_right と同じ動作をする。

# insort

insort 関数は bisect 関数の動作に加えて、リストへの挿入も行う関数である。
bisect 関数と同様に、リストに入力と同じ値があった場合にその値の前か後のどちらに挿入するかは、**insort_left**と**insort_right**という関数があるので使い分ける。
ちなみに insort 関数は insort_right と同じ動作をする。

```python
>>> import bisect
>>> a=[10,20,30,40,50,60,70,80,90,100]
>>> a
[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
>>>
>>> bisect.insort(a,55)
>>> a
[10, 20, 30, 40, 50, 55, 60, 70, 80, 90, 100]
>>>
```

P.S.

今後二分探索をする必要が出てきたときはこれらを活用していきたい。
まあでも、できればライブラリ頼りではなく、本当はアルゴリズム自体も自分で理解して、一から書けるようにもすべきだけど・・ね
